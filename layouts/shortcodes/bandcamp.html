{{ $album := .Get "album" }}



<div id="bandcamp-placeholder-{{ $album }}" class="bandcamp-placeholder"
    style="cursor: pointer; position: relative; transition: opacity 300ms ease-out;">
    <div class="only-mobile">
        <img src="/images/misc/bandcamp_preview_mobile.png" style="width: 350px; height: 550px; display: block;" />
        <div class="play-button-overlay"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="48" fill="none" stroke="#f2f2f2" stroke-width="2" />
                <polygon points="40,30 40,70 70,50" fill="#f2f2f2" />
            </svg>
        </div>
    </div>


    <div class="only-desktop">
        <img src="/images/misc/bandcamp_preview_desktop.png" style="width: 700px; height: 230px; display: block;" />
        <div class="play-button-overlay"
            style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center;">
            <svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 100 100">
                <circle cx="50" cy="50" r="48" fill="none" stroke="#131314" stroke-width="2" />
                <polygon points="40,30 40,70 70,50" fill="#131314" />
            </svg>
        </div>
    </div>

</div>


<div id="bandcamp-player-{{ $album }}" class="bandcamp-player"
    style="display: none; opacity: 0; transition: opacity 1s ease-in;">
    <div class="only-desktop">
        <div style="display: flex; justify-content: center;">
            <iframe style="border: 0; width: 700px; height: 230px;" src="about:blank"
                data-src="https://bandcamp.com/EmbeddedPlayer/album={{ $album }}/size=large/bgcol=ffffff/linkcol=0687f5/tracklist=true/artwork=small/transparent=true/"
                seamless></a></iframe>
        </div>
    </div>
    <div class="only-mobile">
        <div style="display: flex; justify-content: center;">
            <iframe style="border: 0; width: 350px; height: 550px;" src="about:blank"
                data-src="https://bandcamp.com/EmbeddedPlayer/album={{ $album }}/size=large/bgcol=ffffff/linkcol=0687f5/transparent=true/"
                seamless></a></iframe>
        </div>
    </div>
</div>




<script>
    document.getElementById('bandcamp-placeholder-{{ $album }}').addEventListener('click', function () {
        var placeholder = this;
        var player = document.getElementById('bandcamp-player-{{ $album }}');
        var iframes = player.querySelectorAll('iframe');

        placeholder.style.opacity = '0';

        setTimeout(function () {
            placeholder.style.display = 'none';
            player.style.display = 'block';

            // A small delay to ensure the display property is applied before changing opacity
            setTimeout(function () {
                player.style.opacity = '1';
            }, 20);

            iframes.forEach(function (iframe) {
                // to avoid reloading the iframe
                if (iframe.src === 'about:blank') {
                    iframe.src = iframe.dataset.src;
                }
            });
        }, 300); // This duration should match the transition duration of the placeholder
    }, { once: true }); // The event should only run once
</script>