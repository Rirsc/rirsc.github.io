<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet href="/feed_style.xsl" type="text/xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:media="https://www.rssboard.org/media-rss">
  <channel>
    <title>Terminal on RIRSC</title>
    <link>http://localhost:1313/tags/terminal/</link>
    <description>Recent content in Terminal on RIRSC</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>Ricardo LÃ³pez</copyright>
    <lastBuildDate>Wed, 07 Feb 2024 07:32:14 +0100</lastBuildDate><atom:link href="http://localhost:1313/tags/terminal/index.xml" rel="self" type="application/rss+xml" /><icon>http://localhost:1313/Rirsc_Logo.svg</icon>
    
    
    <item>
      <title>Command line options with Relm4</title>
      <link>http://localhost:1313/posts/240207_command_line_options_with_relm4/</link>
      <pubDate>Wed, 07 Feb 2024 07:32:14 +0100</pubDate>
      
      <guid>http://localhost:1313/posts/240207_command_line_options_with_relm4/</guid>
      <description><![CDATA[<p>I&rsquo;ve been using <a href="https://relm4.org/">Relm4</a> for a project and it&rsquo;s been pretty great. Relm4 is basically a wrapper around the GTK API that offers a more declarative layer of abstraction for building applications.</p>
<p>The only problem I find is that the project seems a little bit niche. Don&rsquo;t get me wrong, it seems very polished and so far I haven&rsquo;t found any bugs, so that&rsquo;s exceptional considering the scope of the project. The real problem with it being niche is that of course not every use case can be fully covered and documented, so some stuff you just have to figure out for yourself.</p>
<p>This was the case for me with command line options.</p>
<p>You might know that GTK offers a way to manage command line options out of the box, but Relm4 simply doesn&rsquo;t wrap that particular API. After a bit of research I found a good way to make it all work and here&rsquo;s how.</p>
<p>So given a struct named <code>MyAppComponent</code> being your root Relm4 component:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">let</span> app <span style="color:#ff79c6">=</span> gtk4::Application::builder()
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// set other properties as needed...
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    .flags(gtk4::gio::ApplicationFlags::HANDLES_COMMAND_LINE)
</span></span><span style="display:flex;"><span>    .build();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// don&#39;t know if this really MUST be static, but that&#39;s what works for me
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span><span style="color:#ff79c6">static</span> BROKER: <span style="color:#50fa7b">relm4</span>::MessageBroker<span style="color:#ff79c6">&lt;</span>MyAppComponent::Input<span style="color:#ff79c6">&gt;</span> <span style="color:#ff79c6">=</span> relm4::MessageBroker::new();
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// this is just an example, here&#39;s the documentation for the Gio.Application API
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4">// https://docs.gtk.org/gio/method.Application.add_main_option.html
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>app.add_main_option(
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;foo&#34;</span>,
</span></span><span style="display:flex;"><span>    gtk4::glib::Char::try_from(<span style="color:#f1fa8c">&#39;f&#39;</span>).unwrap(),
</span></span><span style="display:flex;"><span>    gtk4::glib::OptionFlags::IN_MAIN,
</span></span><span style="display:flex;"><span>    gtk4::glib::OptionArg::<span style="color:#8be9fd;font-style:italic">None</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#f1fa8c">&#34;foo option description here&#34;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#8be9fd;font-style:italic">None</span>
</span></span><span style="display:flex;"><span>);
</span></span><span style="display:flex;"><span><span style="color:#6272a4">// add as many options as you want
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">let</span> sender <span style="color:#ff79c6">=</span> BROKER.sender(); <span style="color:#6272a4">// we&#39;ll move this to the signal handler below
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>app.connect_command_line(<span style="color:#ff79c6">move</span> <span style="color:#ff79c6">|</span>this, cmdline<span style="color:#ff79c6">|</span> {
</span></span><span style="display:flex;"><span>    this.activate();
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// very basic example, what I actually did was parse the
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// ApplicationCommandLine object and save my flags in an ad-hoc struct
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    <span style="color:#6272a4">// but this should also just work
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>    sender.emit(MyAppComponent::Input::HandleCommandLine(cmdline));
</span></span><span style="display:flex;"><span>    <span style="color:#bd93f9">0</span>
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#8be9fd;font-style:italic">let</span> relm_app <span style="color:#ff79c6">=</span> relm4::RelmApp::from_app(app).with_broker(<span style="color:#ff79c6">&amp;</span>BROKER);
</span></span><span style="display:flex;"><span>relm_app.run::<span style="color:#ff79c6">&lt;</span>MyAppComponent<span style="color:#ff79c6">&gt;</span>(MyAppComponent::Init {
</span></span><span style="display:flex;"><span>    <span style="color:#6272a4">// your init data here
</span></span></span><span style="display:flex;"><span><span style="color:#6272a4"></span>});
</span></span></code></pre></div><p>All you need now is a handler for the <code>HandleCommandLine</code> input signal in your app component and you&rsquo;re pretty much all set.</p>
<p>This is very much a simplified example of what I&rsquo;m actually doing, but it should serve as a good base to build on top of. Being that this was previously completely undocumented, at least it&rsquo;s a starting point.</p>
<p>Feel free to comment if you have found a better solution or if somehow I missed some critical piece of documentation that explains the actual way to do this.</p>
]]></description>
      
    </item>
    
    
    
    <item>
      <title>Raspberry Pi Pico pinout in your terminal</title>
      <link>http://localhost:1313/posts/raspberry_pi_pico_pinout_in_your_terminal/</link>
      <pubDate>Tue, 09 Mar 2021 13:14:27 +0100</pubDate>
      
      <guid>http://localhost:1313/posts/raspberry_pi_pico_pinout_in_your_terminal/</guid>
      <description><![CDATA[<p>I&rsquo;m playing around with the new <a href="https://www.raspberrypi.org/products/raspberry-pi-pico">Raspberry Pi Pico</a>, and I quickly realized that I&rsquo;d really love to have a quick pinout reference in my terminal.</p>
<p>I thought of making a man page, but I would have lost the color (I don&rsquo;t know how to use arbitrary colors in groff), so I just created a simple text file with ascii escape sequences for colors and called it a day. It works, and it&rsquo;s pretty!</p>
<p>I&rsquo;m uploading it here for your convenience (and mine as well), you should be able to grab it from your *NIX box by just typing:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>curl https://gabmus.org/pico_pinout
</span></span></code></pre></div><p>If you want to save it in a file, just add <code>&gt; some_file_name</code> to the above.</p>
]]></description>
      
        <media:thumbnail url="http://localhost:1313/images/post_pics/Raspberry_Pi_Pico_pinout_in_your_terminal/screenshot.avif" />
      
    </item>
    
    
  </channel>
</rss>
